<Window x:Class="CalcApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModels="clr-namespace:CalcApp.ViewModels"
        Title="ðŸ§® Modern KalkulÃ¡tor" Width="540" MinWidth="520" Height="680" MinHeight="600"
        ResizeMode="CanResize"
        Background="{DynamicResource WindowBackgroundBrush}"
        KeyDown="Window_KeyDown" Focusable="True"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="False">

    <Window.DataContext>
        <viewModels:CalculatorViewModel />
    </Window.DataContext>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" /> <RowDefinition Height="Auto" /> <RowDefinition Height="Auto" /> <RowDefinition Height="*" />    </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,0,0,12">
            <ToggleButton x:Name="TurboToggle" Width="100" Height="40" Margin="0,0,0,0" VerticalAlignment="Top"
                          Content="ðŸš€ Turbo" FontSize="14" FontWeight="SemiBold" Cursor="Hand"
                          Click="TurboToggle_Click" />
            <ToggleButton x:Name="SpeechToggle" Width="120" Height="40" Margin="12,0,0,0" VerticalAlignment="Top"
                          Content="ðŸŽ¤ BeszÃ©d: Be" FontSize="14" FontWeight="SemiBold" Cursor="Hand"
                          Checked="SpeechToggle_Checked" Unchecked="SpeechToggle_Unchecked" IsChecked="True"/>
            <Button Width="100" Height="40" Margin="12,0,0,0" VerticalAlignment="Top"
                    Content="ðŸ“‚ Logs" FontSize="14" FontWeight="SemiBold" Cursor="Hand"
                    Command="{Binding OpenLogsCommand}" />
        </StackPanel>

        <Grid Grid.Row="1" CacheMode="BitmapCache">
            <Border CornerRadius="24" BorderBrush="{DynamicResource ButtonBackgroundBrush}"
                    BorderThickness="1" Padding="16"
                    Background="{DynamicResource BorderBackgroundBrush}"
                    Effect="{DynamicResource NeonBorderEffect}">
                <TextBox x:Name="Display" FontSize="48" FontWeight="Light"
                         HorizontalAlignment="Stretch" VerticalAlignment="Center"
                         Text="{Binding Display, Mode=TwoWay}" TextAlignment="Right" IsReadOnly="True" BorderThickness="0"
                         Background="Transparent" Foreground="{DynamicResource BorderForegroundBrush}"
                         Effect="{DynamicResource NeonTextEffect}"
                         UseLayoutRounding="True" SnapsToDevicePixels="True"
                         TextOptions.TextFormattingMode="Display" />
            </Border>
        </Grid>

        <Border Grid.Row="2" Margin="0,16,0,0" Padding="16"
                Background="{DynamicResource BorderBackgroundBrush}"
                CornerRadius="20"
                BorderBrush="{DynamicResource ButtonBackgroundBrush}"
                BorderThickness="1"
                SnapsToDevicePixels="True"
                Effect="{DynamicResource WindowShadowEffect}"
                CacheMode="BitmapCache">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock Text="ðŸ’¾ MemÃ³ria" FontSize="14" FontWeight="SemiBold"
                           Margin="0,0,0,8" Foreground="{DynamicResource BorderForegroundBrush}" Opacity="0.7" />
                <ListBox x:Name="MemoryList" Grid.Row="1" ItemsSource="{Binding MemoryItems}"
                         Foreground="{DynamicResource BorderForegroundBrush}"
                         Background="Transparent" BorderThickness="0"
                         FontSize="14" FontWeight="Normal"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         VirtualizingPanel.IsVirtualizing="True"
                         VirtualizingPanel.VirtualizationMode="Recycling" />
            </Grid>
        </Border>

        <Grid Grid.Row="3" Margin="0,20,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Button Content="sin" Grid.Row="0" Grid.Column="0" Command="{Binding SinCommand}" />
            <Button Content="cos" Grid.Row="0" Grid.Column="1" Command="{Binding CosCommand}" />
            <Button Content="tan" Grid.Row="0" Grid.Column="2" Command="{Binding TanCommand}" />
            <Button Content="âˆš" Grid.Row="0" Grid.Column="3" Command="{Binding SqrtCommand}" />

            <Button Content="n!" Grid.Row="1" Grid.Column="0" Command="{Binding FactorialCommand}" />
            <Button Content="M+" Grid.Row="1" Grid.Column="1" Command="{Binding MemoryAddCommand}" />
            <Button Content="M-" Grid.Row="1" Grid.Column="2" Command="{Binding MemorySubtractCommand}" />
            <Button Content="MR" Grid.Row="1" Grid.Column="3" Command="{Binding MemoryRecallCommand}" />

            <Button Content="MC" Grid.Row="2" Grid.Column="0" Command="{Binding MemoryClearCommand}" />
            <Button Content="C" Grid.Row="2" Grid.Column="1" Command="{Binding ClearCommand}" Foreground="#FFEF5350" FontWeight="Bold" />
            <Button Content="âŒ«" Grid.Row="2" Grid.Column="2" Command="{Binding DeleteCommand}" />
            <Button Content="%" Grid.Row="2" Grid.Column="3" Command="{Binding PercentCommand}" />

            <Button Content="7" Tag="7" Grid.Row="3" Grid.Column="0" Command="{Binding DigitCommand}" CommandParameter="7" />
            <Button Content="8" Tag="8" Grid.Row="3" Grid.Column="1" Command="{Binding DigitCommand}" CommandParameter="8" />
            <Button Content="9" Tag="9" Grid.Row="3" Grid.Column="2" Command="{Binding DigitCommand}" CommandParameter="9" />
            <Button Content="Ã·" Grid.Row="3" Grid.Column="3" Command="{Binding OperatorCommand}" CommandParameter="/" Foreground="{DynamicResource GlowBrush}" />

            <Button Content="4" Tag="4" Grid.Row="4" Grid.Column="0" Command="{Binding DigitCommand}" CommandParameter="4" />
            <Button Content="5" Tag="5" Grid.Row="4" Grid.Column="1" Command="{Binding DigitCommand}" CommandParameter="5" />
            <Button Content="6" Tag="6" Grid.Row="4" Grid.Column="2" Command="{Binding DigitCommand}" CommandParameter="6" />
            <Button Content="Ã—" Grid.Row="4" Grid.Column="3" Command="{Binding OperatorCommand}" CommandParameter="*" Foreground="{DynamicResource GlowBrush}" />

            <Button Content="1" Tag="1" Grid.Row="5" Grid.Column="0" Command="{Binding DigitCommand}" CommandParameter="1" />
            <Button Content="2" Tag="2" Grid.Row="5" Grid.Column="1" Command="{Binding DigitCommand}" CommandParameter="2" />
            <Button Content="3" Tag="3" Grid.Row="5" Grid.Column="2" Command="{Binding DigitCommand}" CommandParameter="3" />
            <Button Content="âˆ’" Grid.Row="5" Grid.Column="3" Command="{Binding OperatorCommand}" CommandParameter="-" Foreground="{DynamicResource GlowBrush}" />

            <Button Content="." Grid.Row="6" Grid.Column="2" Command="{Binding DecimalCommand}" />
            <Button Content="0" Tag="0" Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2" Command="{Binding DigitCommand}" CommandParameter="0" />
            <Button Content="xÊ¸" Grid.Row="6" Grid.Column="3" Command="{Binding OperatorCommand}" CommandParameter="^" Foreground="{DynamicResource GlowBrush}" />

            <Button Content="Â±" Grid.Row="7" Grid.Column="0" Command="{Binding SignCommand}" />
            <Button Content="=" Grid.Row="7" Grid.Column="1" Grid.ColumnSpan="3" Command="{Binding EqualsCommand}"
                    Background="{DynamicResource AccentButtonBrush}" FontWeight="Bold" FontSize="24" />
        </Grid>

    </Grid>
</Window>